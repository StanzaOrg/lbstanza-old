($begin

($package a)

($deftype A () ($none))
($deftype B () ($none))
($deftype C () ($none))

($def a ($none) ($new A))
($def b B ($new B))
($defvar c ($none) a)
;($set c a)
;($set c b)
;($set c c)
($defmulti func () (A B) ($none))
($defmulti func (($cap x)) (B ($cap x)) x)
($set c ($do func b c))

($do
   ($fn (($none)) ($none) (f)
      ($do f a))

   ($fn (($none)) ($none) (x)
      x))

($defmulti A! () (A) ($none))
($defmulti f () (($-> (A) A)) ($none))
($defmulti f () (($-> (B) B)) ($none))

($do f
   ($fn (($none)) ($none) (a)
      ($do A! a)))

($defmulti g () (A) A)
($defmulti g () (B) B)
($defvar d ($none) ($new A))
($set d ($new B))
($def e ($none) ($do g d))
($def z ($or A ($?)) d)
($def w ($none) ($do g z))


;($defmulti func (x, ($cap y), ($cap z)) (X, ($cap ($cap z)), ($none)) ($none))

;($defn func () () ($none) ()
;   ($begin 3 ($begin)))

;($ls-let
;   ($ls-begin
;      ($ls-return 2)
;      ($ls-do ($of f X Y))))

;($ls-defn func () (A B C) D (x, y, z)
;   ($ls-do f))

;($deftype a (a b) ($none))
;($deftype A () ($and A B))
;($deftype B () ($none))
;($deftype D () ($none))
;($deftype E () A)
;
;($ls-deftype Animal () ($none)
;   (($ls-ref A) ($ls-ref B)) ($none)
;   (x, y) ($none))
;
;($ls-deftype Animal2 () ($none)
;   (($ls-ref A) ($ls-ref B)) ($ls-ref D)
;   (x, y) z)
;
;($ls-def z Animal 3)


;($deftype x)
;($deftype a (a b) ($none))
;($deftype a (a b) ($and ($none) a))
;($deftype a () ($of a))
;($deftype a () ($of a ($and a b)))
;($deftype a () ($of a ($or a b)))
;($deftype a () ($of a ($-> a b)))
;($deftype a () ($of a ($-> (a b) b)))
;($deftype a () ($of a ($?)))
;($deftype a () ($of a ($void)))
;($deftype a () ($of a ($cap x)))
;($deftype a () ($of a ($cap (x))))
;($deftype a () ($cap (x)))
;($import ($of))
;($import ($of a)
;   ($prefix st/)
;   ($prefix st- 3)
;   ($prefix-of a 10)
;   ($prefix-of))
;($import ($of a)
;   ($prefix st/)
;   ($prefix st-)
;   ($prefix-of (a) A))
;($import A
;   ($prefix st/)
;   ($prefix st-)
;   ($prefix-of (a) A))
;($begin
;   ($package a
;      ($import b
;         ($prefix p)
;         ($prefix-of (a b c) p2))
;      ($import c
;         ($prefix-of (a b c) p2))
;      ($package d))
;   ($package a
;      ($import b
;         ($prefix p)
;         ($prefix-of (a b c) p2))
;      ($import c
;         ($prefix-of (a b c) p2))
;      ($package d))
;   ($public
;      ($begin
;         ($deftype a () ($of a ($cap x)))
;         ($package d))))

;($defmulti f (a c ($cap b)) (($-> (($of a)) ($cap b))) b)
;($defn f () (Animal Animal) ($none) (x y)
;   ($begin
;      ($def z ($none) 3)
;      ($def w ($none) 4)
;      ($do x)
;      y))
;
;($ls-defn f () (Animal Animal) Animal (x y)
;   ($begin
;      ($ls-return ($ls-do x))))

;($defmethod f (f) (Animal Animal) ($none) (f y) ($begin
;   ($defn g () (a) ($none) (x) x)   
;   ($defn g () (Animal) ($none) (x) x)
;   ($fn (a Animal) ($none) (x y) x)
;   ($begin)))
;
)