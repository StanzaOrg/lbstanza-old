program callc :
   ($externfn 0 ($fn (int) int) _print_int)
   ($init
      ($call-c int ($var 0) ($int 42)))

program callc2 :
   ($externfn 0 ($fn (int int int int int int int int
                      int int int int int int int int) int) _print_ints)
   ($init
      ($call-c int ($var 0)
                   ($int 1) ($int 2) ($int 3) ($int 4) ($int 5)
                   ($int 6) ($int 7) ($int 8) ($int 9) ($int 10) ($int 11)
                   ($int 12) ($int 13) ($int 14) ($int 15) ($int 16)))

program callc-float :
   ($externfn 0 ($fn (float) int) _print_float)
   ($init
      ($call-c int ($var 0) ($float 42.2)))


program callc-floats :
   ($externfn 0 ($fn (float float float float float float float float
                      float float float float float float float float) int) _print_floats)
   ($init
      ($call-c int ($var 0)
                   ($float 1.42) ($float 2.42) ($float 3.42) ($float 4.42) ($float 5.42)
                   ($float 6.42) ($float 7.42) ($float 8.42) ($float 9.42) ($float 10.42) ($float 11.42)
                   ($float 12.42) ($float 13.42) ($float 14.42) ($float 15.42) ($float 16.42)))

program callc-ints-floats :
   ($externfn 0 ($fn (int float int float int float int float
                      int float int float int float int float) int) _print_ints_floats)
   ($init
      ($call-c int ($var 0)
                   ($int 1) ($float 2.42) ($int 3) ($float 4.42) ($int 5)
                   ($float 6.42) ($int 7) ($float 8.42) ($int 9) ($float 10.42) ($int 11)
                   ($float 12.42) ($int 13) ($float 14.42) ($int 15) ($float 16.42)))

program retc-int :
   ($externfn 0 ($fn (int) int) _print_int)
   ($externfn 1 ($fn () int) _ret_int)
   ($init
      ($call-c int ($var 0)
         ($call-c int ($var 1))))

program retc-float :
   ($externfn 0 ($fn (float) int) _print_float)
   ($externfn 1 ($fn () float) _ret_float)
   ($init
      ($call-c int ($var 0)
         ($call-c float ($var 1))))

program printf :
   ($externfn 0 ($fn (($ptr byte)) ? int) _printf)
   ($init
      ($call-c int ($var 0)
                   ($string "The %dth world in this system is %f units long and is called %s.\n")
                   ($int 13)
                   ($double 42.2)
                   ($string "Earth")))

program function :
   ($externfn 0 ($fn (($ptr byte)) ? int) _printf)
   ($lsdefn 1 () (2, 3)
        (int int) int
        ($call-c int ($var 0) ($string "x = %d\n") ($var 2))
        ($call-c int ($var 0) ($string "y = %d\n") ($var 3))
        ($return ($int 0)))
   ($init
      ($do int ($var 1) () ($int 10) ($int 42))
      ($do int ($var 1) () ($int 42) ($int 10)))

program conv :
   ($externfn 0 ($fn (($ptr byte)) ? int) _printf)
   ($init
      ($call-c int ($var 0) ($string "res = %d\n")
         ($conv ($byte 16) int))
      ($call-c int ($var 0) ($string "res = %d\n")
         ($conv ($byte 255) int))
      ($call-c int ($var 0) ($string "res = %d\n")
         ($conv ($float 13.4) int))
      ($call-c int ($var 0) ($string "res = %f\n")
         ($conv ($int 13) double))
      ($call-c int ($var 0) ($string "res = %f\n")
         ($conv ($float 13.0) double))
      ($call-c int ($var 0) ($string "res = %d\n")
         ($conv ($double 13.4) int))
      ($call-c int ($var 0) ($string "res = %d\n")
         ($conv ($double -13.6) int))
      ($call-c int ($var 0) ($string "res = %f\n")
         ($conv ($byte 255) double))
      ($call-c int ($var 0) ($string "res = %d\n")         
         ($conv ($conv ($int 341) byte) int)))

program primops :
   ($externfn 0 ($fn (($ptr byte)) ? int) _printf)
   ($init
      ($call-c int ($var 0) ($string "res = %d\n")
         ($add int ($int 10) ($int 32)))
      ($call-c int ($var 0) ($string "res = %d\n")
         ($mul int ($int 10) ($int 32)))
      ($call-c int ($var 0) ($string "res = %ld\n")
         ($add long ($long 10) ($long 32)))
      ($call-c int ($var 0) ($string "res = %ld\n")
         ($mul long ($long 10) ($long 32)))

      ($call-c int ($var 0) ($string "res = %d\n")
         ($conv ($mul byte ($byte 10) ($byte 20)) int))

      ($call-c int ($var 0) ($string "res = %d\n")
         ($sub int ($int 32) ($int 10)))
      ($call-c int ($var 0) ($string "res = %d\n")
         ($sub int ($int 10) ($int 32)))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($sub long ($long 32) ($long 10)))
      ($call-c int ($var 0) ($string "res = %ld\n")
         ($sub long ($long 10) ($long 32)))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($div long ($long 30488) ($long 74)))
      ($call-c int ($var 0) ($string "res = %ld\n")
         ($conv ($div byte ($byte 123) ($byte 6)) long))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($and long ($long 123) ($long -8)))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($le long ($long 123) ($long -8)))
      ($call-c int ($var 0) ($string "res = %ld\n")
         ($ge long ($long 123) ($long -8)))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($shl long ($long 123) ($long 1)))
         
      ($call-c int ($var 0) ($string "res = %ld\n")
         ($shr long ($long -123) ($long 1)))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($ashr long ($long -123) ($long 1)))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($conv ($shl byte ($byte 18) ($byte 1)) long))

      ($call-c int ($var 0) ($string "res = %ld\n")
         ($conv ($shr byte ($byte 18) ($byte 1)) long)))

;program tcall :
;   ($externfn 0 ($fn (($ptr byte)) ? int) _printf)
;   ($lsdefn 1 () (2)
;        (int) int
;        ($call-c int ($var 0) ($string "x = %d\n") ($var 2))
;        ($call-c int ($var 0) ($string "y = %d\n") ($var 3))
;        ($return ($int 0)))
      