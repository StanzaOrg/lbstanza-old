defpackage user :
   import core
   import collections

;defn main (x) :
;   val [[a b] [c d] [[e]]] = x
;   println("a = %_" % [a])
;   println("b = %_" % [b])
;   println("c = %_" % [c])
;   println("d = %_" % [d])
;   println("e = %_" % [e])
;
;main([[1 2] [3 4] [[1]]])


extern tree_export_mesh: (ptr<?>, ptr<?>, float, float, float, float, float, float, float) -> ptr<?>

lostanza defn tree-export-mesh (t:ref<False>, filename:ref<String>,
                                xmin:ref<Double>, ymin:ref<Double>,
                                zmin:ref<Double>, xmax:ref<Double>,
                                ymax:ref<Double>, zmax:ref<Double>,
                                res:ref<Double>) -> ref<False> :
  call-c tree_export_mesh(0L as ptr<?>, addr!(filename.chars),
                   xmin.value as float, ymin.value as float,
                   zmin.value as float, xmax.value as float,
                   ymax.value as float, zmax.value as float,
                   res.value as float)
  return false

tree-export-mesh(false, "menger.stl", -2.0, -2.0, -2.0, 2.0, 2.0, 2.0, 0.1)

