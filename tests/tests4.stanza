defpackage user :
   import core

lostanza deftype SmallInt :
   value: int

lostanza defn SmallInt (x:ref<Int>) -> ref<SmallInt> :
   return new SmallInt{x.value}

lostanza defn value (x:ref<SmallInt>) -> ref<Int> :
   return new Int{x.value}

defn blow-heap () :
   for i in 0 to 10000 do :
      Array<?>(10000)

defn main () :
   for i in 0 to 1000 do :
      val s = SmallInt(i)
      blow-heap()
      println(value(s))

main()