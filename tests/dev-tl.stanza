defpackage stz-test-suite/dev-tl :
  import core
  import collections
  import reader
  import parser/macroexpander
  import stz/il-ir
  import stz/input
  import stz-test-suite/test-tools
  import stz/core-macros

;============================================================
;=================== Read an Input IR =======================
;============================================================

public defn read-input-ir (filenames:Tuple<String>) -> ? :
  for filename in filenames do :
    val form = read-file(filename)
    val expanded = macroexpand(SimpleMacroexpander(), form, List())
    val default-imports = [IImport(`core), IImport(`collections)]
    val ipackages = to-ipackages(expanded, default-imports)
    do(println, ipackages)

;============================================================
;======================= Launch! ============================
;============================================================

public defn main () :
  println("Hello world")
  read-input-ir(map(data-file,["tl1.stanza"]))

main()