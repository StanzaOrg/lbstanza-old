analyze-block test01 :
  BlockStmts :
    inputs : ()
    instructions :
      (V0, V1, V2) = op0()
      op1(V1, V2)
      branch (L1, L2)
    outputs :
      port 0 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)), pref-reg:R2)
      port 1 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))

;Like test01 except:
;  V0 prefers to be saved.
analyze-block test02 :
  BlockStmts :
    inputs : ()
    instructions :
      (V0, V1, V2) = op0()
      op1(V1, V2)
      branch (L1, L2)
    outputs :
      port 0 (usage-position: 3, PortPref(PreferSave, PreferLoad(Rx)), pref-reg:R2)
      port 1 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))

;Like test02 except:
;  V1 prefers to be unloaded.
analyze-block test03 :
  BlockStmts :
    inputs : ()
    instructions :
      (V0, V1, V2) = op0()
      op1(V1, V2)
      branch (L1, L2)
    outputs :
      port 0 (usage-position: 3, PortPref(PreferSave, PreferLoad(Rx)), pref-reg:R2)
      port 1 (usage-position: 3, PortPref(PreferNoSave, PreferNoLoad))

;Start with too many variables being loaded.
analyze-block test04 :
  BlockStmts :
    inputs :
      port 0 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 1 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 2 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 3 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 4 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 5 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 6 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 7 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
    instructions : ()
    outputs : 
      port 0 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 1 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 2 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 3 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 4 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 5 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 6 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))
      port 7 (usage-position: 3, PortPref(PreferNoSave, PreferLoad(Rx)))

model (V0, V1, V2) = op0() :
  assign Rx to V0
  assign Rx to V1
  assign Rx to V2

model op1(V0:R4, V1:R3) : ()


