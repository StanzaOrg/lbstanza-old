defpackage user :
   import core
   import collections

defn main () :
   val q = Queue<Int>()
   do(add{q, _}, [1 3 5 2 -1 3 2 -1 5 -1 2 3 -1])

   for iter in 0 to 5 do :
      println("Iteration %_ : %~" % [iter, q])
      for i in 0 to length(q) do :
         val n = pop(q)
         if n < 0 :
            println("Pushed back on %_" % [n])
            add(q, n)
         else :
            println("Removed %_" % [n])
      println("Done iteration %_ : %~" % [iter, q])
      
main()