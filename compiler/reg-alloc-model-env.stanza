defpackage stz/reg-alloc-model-env :
  import core
  import collections
  import stz/reg-alloc-ir
  import stz/reg-alloc-model-properties

;Abstract interface that provides informations about models.
public deftype ModelEnv

;Retrieve the number of models in the environment.
public defmulti num-models (env:ModelEnv) -> Int

;Retrieve the model with the given id.
public defmulti model (env:ModelEnv, id:Int) -> OperationModel

;Return true if the given model calls Return.
public defmulti returns? (env:ModelEnv, id:Int) -> True|False

;Return true if the given model calls ClearRegisters
public defmulti clears-registers? (env:ModelEnv, id:Int) -> True|False

;Retrieve the argument types of the given model.
public defmulti arg-types (env:ModelEnv, id:Int) -> Tuple<RegisterType>

;Retrieve the result types of the given model.
public defmulti result-types (env:ModelEnv, id:Int) -> Tuple<RegisterType>

;Return true if the operation 'op-id' requires argument 'arg-index'
;to be released in order to function correctly.
public defmulti forced-release? (env:ModelEnv, op-id:Int, arg-index:Int) -> True|False

;Return true if the operation 'op-id' contains any arguments that
;are required to be released to function correctly.
public defmulti forced-release? (env:ModelEnv, op-id:Int) -> True|False

;Return the used registers for the given operation under the given usage context.
public defmulti used-registers (env:ModelEnv, op-id:Int, ctxt:UsageContext) -> UsedRegisters